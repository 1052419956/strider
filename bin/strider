#!/usr/bin/env node
var cli = require('strider-cli')({
  version: require('../package.json').version,
  models: function() {
    return require('../lib/models')
  },
  common: function() {
    return require('../lib/common')
  },
  main: function() {
    return require('../main')
  },
  getPluginPath: function() {
    return require('../lib/plugin_path')
  },
  upgrade: function() {
    return require('../lib/models/upgrade')
  },
  config: function() {
    return require('../lib/config');
  },
  connect: function(cb) {
    var mongoose = require('mongoose');
    var mongodbUrl = require('../lib/config').db_uri;
    console.log('Connecting to MongoDB URL: %s\n', mongodbUrl);
    mongoose.connect(mongodbUrl, cb);
  }
});

if (!module.parent) {
  cli.parser.parse();
}

module.exports = cli.start;
